# استخراج آگهی‌های دیوار
توی این پروژه آگهی‌های سایت دیوار توی یک سرچ خاص و شرایط خاص که خود کاربر به ما داده رو دائم رصد می‌کنیم و اگر تغییری اتفاق بیوفته توی بله و تلگرام به کاربر اطلاع می‌دیم.



## بخش موقت (چیزایی که تا الآن فهمیدم)
**۳۰ دی ساعت های ۱ شب**

وقتی یک لینک مثل <a href = "https://divar.ir/s/mashhad/buy-residential">اینجا</a> رو باز می‌کنیم موارد زیادی برای نمایش وجود داره و همش در همون بخش اول بالا نمی‌یاد.
برای این که باقی آگهی‌ها بیاد در حالت عادی باید به پایین صفحه حرکت کنیم. خوب این طور برداشت می‌شه که باید از selenium استفاده کرد ولی به لطف یک چیزی که از یکی از دوستان یاد گرفتم احتمال دادم که مثل دیجیکالا بشه از یک بخش api مانندی (که انگار مال عموم نیست!) استفاده کرد.
ظاهرا توی این لینک اطلاعات جالبی هست و از طریق POST باید درخواست بشه
 یعنی احتمالا مثلا با کتابخونه request که پیش می‌ریم باید نوشت:
```page = request.post(url)```
ولی این و get فعلا امشب هیچ کدومشون نتیجه‌ای به من ندادن.

**۳۰ دی ساعت ۱۳**
ظاهرا اون api که می‌تونست اطلاعات رو برای ما بگیره یک سری اطلاعات به سمت سرور سایت دیوار می‌فرسته گرفته از query که نام محصول یا خدمت می‌تونه باشه تا فیلترهایی مثل شهر مد نظر و ...

مثلا لینک:

<a href = "https://api.divar.ir/v8/web-search/3/ROOT">https://api.divar.ir/v8/web-search/3/ROOT</a>
یک سری چیز باهاش ارسال می‌شه (اسمشون چیه هنوز نمی‌دونم)

{
	"json_schema": {
		"category": {
			"value": "ROOT"
		},
		"cities": [
			"3"
		],
		"query": "خانه"
	},
	"last-post-date": 1674209294091100
}

اینجامشکل ما این بخش ```last-post-date``` هست *یا شایدم چیز دیگه‌ای* ولی در هر صورت وقتی ریکوئست ارسال می‌شه در برگشت برامون خطای 406 می‌یاد.
فعلا می‌شه کاری کرد که همون ۱۰ ،۲۰ نتیجه اول که بالای صفحه می‌یاد رو دریافت کنیم.